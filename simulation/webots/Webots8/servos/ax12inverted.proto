#VRML_OBJ V8.0.5 utf8
# AX-12 Servo with endpoint slot

PROTO ax12inverted [
  field SFString name "AX_12"
  field SFRotation rotation 0 1 0 0
  field SFVec3f translation 0 0 0
  field SFFloat servoPosition 0
  field SFFloat acceleration -1
  field SFFloat maxVelocity 10
  field SFFloat minPosition 0
  field SFFloat maxPosition 0
  field SFFloat maxTorque 10
  field MFNode endPoint NULL
  hiddenField SFVec3f boxOffset 0 0.019 -0.0135 # Move 0,0,0 to the bottom of the servo
  hiddenField SFVec3f boxSize 0.032 0.050 0.038 # Overall size of a servo
  hiddenField SFVec3f hingeOffset 0 0.0385 0.019
  hiddenField SFRotation hingeRotation 1 0 0 1.5707
]
{
  Solid {
    translation %{=fields.translation.x}% %{=fields.translation.y+(0.005/2)}% %{=fields.translation.z}%
    rotation IS rotation
    children [
      DEF HINGE Transform {
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.9 0.9 0.9
              }
            }
            geometry Cylinder {
              height 0.005
              radius 0.011
            }
          }
        ]
      }
      Transform {
        children [
          HingeJoint {
            jointParameters HingeJointParameters {
              axis 0 1 0
              anchor 0 0 0
              position IS servoPosition
            }
            device [
              RotationalMotor {
                name IS name
                acceleration IS acceleration
                maxVelocity IS maxVelocity
                minPosition IS minPosition
                maxPosition IS maxPosition
                maxTorque IS maxTorque
              }
            ]
            endPoint Solid {
              children [
                Transform {
                  translation IS boxOffset
                  rotation IS hingeRotation
                  children [
                    ax12mesh {
                    }
                  ]
                }
                Transform {
                  translation 0 %{=fields.boxSize.y / 2}% %{=fields.boxOffset.z}%
                  rotation IS hingeRotation
                  children IS endPoint
                }
              ]
              boundingObject Group {
                children [
                  Transform {
                    translation IS boxOffset
                    rotation IS hingeRotation
                    children [
                      Box {
                        size IS boxSize
                      }
                    ]
                  }
                ]
              }
              physics Physics {
                density -1
                mass 0.054
              }
            }
          }
        ]
      }
    ]
    boundingObject USE HINGE
    physics Physics {
      density -1
      mass 0.001
    }
  }
}
