#VRML_OBJ V8.0.5 utf8
# Default tray module for the Sunflower robot

PROTO sunflower_tray [
  field SFFloat servoPosition 0
  field SFString name "tray"
  field SFVec3f traySize 0.325 0.18 0.23
  field SFFloat trayThickness 0.01
]
{
  Solid {
    translation 0 %{=0 - fields.traySize.y}% %{=0 - (fields.traySize.z - fields.trayThickness) / 4 + fields.trayThickness}%
    boundingObject Box {
      size 0.05 0.0025 0.05
    }
    physics Physics {
    }
    children [
      SliderJoint {   
        jointParameters JointParameters {
          axis 0 0 -1
          position IS servoPosition
          minStop -0.001
          maxStop %{=(fields.traySize.z / 2) - 0.03}%
        }
        device [
          LinearMotor {
            name IS name
            acceleration -1
            maxVelocity 0.3
            maxForce 2
            minPosition -0.001
            maxPosition %{=(fields.traySize.z / 2) - 0.03}%
          }
        ]
        endPoint Solid {
          children [
            DEF FRONT Transform {
              translation 0 0 %{=0 - (fields.traySize.z - fields.trayThickness) / 2}%
              children [
                Shape {
                  appearance wood_appearance {
                  }
                  geometry Box {
                    size %{=fields.traySize.x}% %{=fields.traySize.y}% %{=fields.trayThickness}%
                  }
                }
              ]
            }
            DEF BOTTOM Transform {
              translation 0 %{=(fields.traySize.y - fields.trayThickness) / -2 + fields.trayThickness * 2}% %{=fields.trayThickness / 2}%
              children [
                Shape {
                  appearance wood_appearance {
                  }
                  geometry Box {
                    size %{=fields.traySize.x - fields.trayThickness * 6}% %{=fields.trayThickness}% %{=fields.traySize.z - fields.trayThickness}%
                  }
                }
              ]
            }
            DEF LEFT Transform {
              translation %{=(fields.traySize.x - fields.trayThickness) / 2 - fields.trayThickness * 2}% %{=fields.traySize.y / -4 + fields.trayThickness * 2}% %{=fields.trayThickness / 2}%
              children [
                Shape {
                  appearance wood_appearance {
                  }
                  geometry Box {
                    size %{=fields.trayThickness}% %{=fields.traySize.y / 2}% %{=fields.traySize.z - fields.trayThickness}%
                  }
                }
              ]
            }
            DEF RIGHT Transform {
              translation %{=(fields.traySize.x - fields.trayThickness) / -2 + fields.trayThickness * 2}% %{=fields.traySize.y / -4 + fields.trayThickness * 2}% %{=fields.trayThickness / 2}%
              children [
                Shape {
                  appearance wood_appearance {
                  }
                  geometry Box {
                    size %{=fields.trayThickness}% %{=fields.traySize.y / 2}% %{=fields.traySize.z - fields.trayThickness}%
                  }
                }
              ]
            }
          ]
          boundingObject Group {
            children [
              USE FRONT
              USE BOTTOM
              USE RIGHT
              USE LEFT
            ]
          }
          physics Physics {
            density -1
            mass 0.150
          }
        }
      }
    ]
  }
}
